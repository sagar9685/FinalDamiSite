<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Job Portal - Admin Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <style>
      /* Overall page styling */
      body {
        background: #f4f7f6;
        font-family: Arial, sans-serif;
      }

      /* Sidebar styling */
      .sidebar {
        width: 250px;
        background: linear-gradient(145deg, #3b4b6b, #1a2738);
        min-height: 100vh;
        color: white;
        position: fixed;
        top: 0;
        left: 0;
      }

      .sidebar .profile_info {
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .sidebar .siderbar_menu li {
        list-style: none;
        padding: 15px 20px;
        transition: background 0.3s ease;
      }

      .sidebar .siderbar_menu li:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .sidebar .siderbar_menu li a {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
        font-size: 16px;
      }

      .logout_btn button {
        width: 100%;
        padding: 10px;
        background: #ffc107;
        border: none;
        color: white;
        font-weight: bold;
        border-radius: 5px;
        transition: background 0.3s ease;
      }

      .logout_btn button:hover {
        background: #ffa000;
      }

      /* Main container styling */
      .main_container {
        margin-left: 250px;
        padding: 20px;
      }

      .navbar {
        background: #007bff;
        color: white;
        display: flex;
        align-items: center;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      /* Success message styling */
      #successMessage {
        display: none;
      }

      .form-label {
        font-weight: bold;
      }

      .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
      }

      .btn-primary:hover {
        background-color: #0056b3;
        border-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div class="sidebar">
        <div class="profile_info">
          <h3>Admin Panel</h3>
        </div>
        <ul class="siderbar_menu">
          <li>
            <a href="dashboard.html"
              ><i class="fas fa-palette"></i>&nbsp;Dashboard</a
            >
          </li>
          <li>
            <a href="newjob.html"
              ><i class="fas fa-plus-square"></i>&nbsp;New Job</a
            >
          </li>
          <li>
            <a href="joblist.html"
              ><i class="fas fa-file-alt"></i>&nbsp;Job List</a
            >
          </li>
          <li>
            <a href="viewresume.html"
              ><i class="fas fa-file-download"></i>&nbsp;View Resume</a
            >
          </li>
          <li>
            <a href="jobquery.html"
              ><i class="fas fa-search"></i>&nbsp;Job Query</a
            >
          </li>
          <li>
            <a href="user.html"><i class="fas fa-users"></i>&nbsp;User List</a>
          </li>
          <li>
            <a href="contact.html"
              ><i class="fas fa-comment-alt"></i>&nbsp;Contact List</a
            >
          </li>
        </ul>
        <div class="logout_btn">
          <button onclick="logOut()">Logout</button>
        </div>
      </div>

      <div class="main_container">
        <div class="navbar">
          <h3>Add New Job</h3>
        </div>

        <div class="container">
          <div id="successMessage" class="alert alert-success" role="alert">
            Job successfully added!
          </div>

          <form id="jobForm">
            <!-- Job Title and Number of Posts -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">Job Title</label>
                <input
                  type="text"
                  name="title"
                  class="form-control"
                  placeholder="e.g., Web Developer"
                  required
                />
              </div>
              <div class="col-md-6">
                <label class="form-label">Number of Posts</label>
                <input
                  type="number"
                  name="numberOfPosts"
                  class="form-control"
                  placeholder="Enter number of positions"
                  required
                />
              </div>
            </div>

            <!-- Description -->
            <div class="row mb-3">
              <div class="col-md-12">
                <label class="form-label">Description</label>
                <textarea
                  name="description"
                  class="form-control"
                  rows="3"
                  placeholder="Enter job description"
                  required
                ></textarea>
              </div>
            </div>

            <!-- Qualification and Experience -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">Qualification/Education</label>
                <input
                  type="text"
                  name="qualification"
                  class="form-control"
                  placeholder="e.g., MCA, BTech, MBA"
                  required
                />
              </div>
              <div class="col-md-6">
                <label class="form-label">Experience</label>
                <input
                  type="text"
                  name="experience"
                  class="form-control"
                  placeholder="e.g., 2 Years"
                  required
                />
              </div>
            </div>

            <!-- Specialization and Last Date -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">Specialization</label>
                <input
                  type="text"
                  name="specialization"
                  class="form-control"
                  placeholder="Enter specialization"
                  required
                />
              </div>
              <div class="col-md-6">
                <label class="form-label">Last Date to Apply</label>
                <input
                  type="date"
                  name="lastDate"
                  class="form-control"
                  required
                />
              </div>
            </div>

            <!-- Salary and Job Type -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">Salary</label>
                <input
                  type="text"
                  name="salary"
                  class="form-control"
                  placeholder="e.g., 25000/Month, 7LPA"
                  required
                />
              </div>
              <div class="col-md-6">
                <label class="form-label">Job Type</label>
                <select name="jobType" class="form-select" required>
                  <option value="" disabled selected>Select Job Type</option>
                  <option>Full Time</option>
                  <option>Part Time</option>
                  <option>Remote</option>
                  <option>Freelance</option>
                </select>
              </div>
            </div>

            <!-- Company Details -->
            <!-- <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Company/Organization</label>
                            <input type="text" name="company" class="form-control" placeholder="Enter company/organization" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Company Logo</label>
                            <input type="file" name="companyLogo" class="form-control">
                        </div>
                    </div> -->

            <!-- Website and Email -->
            <div class="row mb-3">
              <!-- <div class="col-md-6">
                            <label class="form-label">Website</label>
                            <input type="url" name="website" class="form-control" placeholder="Enter website">
                        </div> -->
              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input
                  type="email"
                  name="email"
                  class="form-control"
                  placeholder="Enter email"
                  required
                />
              </div>
            </div>

            <!-- Country and State -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">Country</label>
                <select name="country" class="form-select" required>
                  <option value="" disabled selected>Select Country</option>
                  <option>USA</option>
                  <option>India</option>
                  <option>UK</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">State</label>
                <input
                  type="text"
                  name="state"
                  class="form-control"
                  placeholder="Enter state"
                />
              </div>
            </div>

            <div class="text-center">
              <button type="submit" class="btn btn-primary btn-lg">
                Add Job
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      if (!sessionStorage.getItem("authToken")) {
        alert("Unauthorized access! Redirecting to login page...");
        window.location.href = "Login.html";
      }

      function logOut() {
        window.location.href = "Login.html";
      }
      document
        .getElementById("jobForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const jobData = new FormData(this);

          fetch(
            "https://monkfish-app-vqwar.ondigitalocean.app/api/jobs/create",
            {
              method: "POST",
              body: jobData,
            }
          )
            .then((response) => response.json())
            .then((data) => {
              if (data && data.message) {
                const successMessage =
                  document.getElementById("successMessage");
                successMessage.style.display = "block";
                setTimeout(() => (successMessage.style.display = "none"), 5000);
                this.reset();
              } else {
                alert("Failed to add the job. Try again.");
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("Error occurred while adding the job.");
            });
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
